import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{r as x}from"./index-CJ_LmFaV.js";const n=["anchor","bridge","symbol","dialog","transpersonal"],m=["#FDE68A","#FECACA","#C7F9CC","#CBD5FF","#FDE68A"],F=s=>`${s}ms cubic-bezier(.2,.9,.3,1)`,u=({pillars:s={},size:o=120,highlight:c=[]})=>{const d=Math.max(...n.map(t=>Number(s[t]||0)),1),g=Math.round(Object.values(s).reduce((t,r)=>t+(Number(r)||0),0)||0),[y,w]=x.useState({});return x.useEffect(()=>{const t=Date.now(),r={};c.forEach(l=>r[l]=t),w(l=>({...l,...r}))},[c.join("|")]),e.jsxs("div",{style:{display:"inline-block",position:"relative"},children:[e.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,"aria-label":"Constellation flower",role:"img",children:e.jsxs("g",{transform:`translate(${o/2},${o/2})`,children:[n.map((t,r)=>{const l=r/n.length*Math.PI*2-Math.PI/2,a=Number(s[t]||0),i=a/d,p=18+i*(o/2-20),b=Math.cos(l)*p,v=Math.sin(l)*p,j=18+i*12,_=28+i*18,f=y[t]||0,h=f?Date.now()-f:0,C=h>0&&h<900;return e.jsxs("g",{transform:`translate(${b},${v})`,style:{transition:"transform 400ms ease"},children:[e.jsx("foreignObject",{x:-60,y:-70,width:120,height:80,style:{pointerEvents:"none"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"flower-tooltip",style:{display:"none"},children:[e.jsx("div",{className:"flower-tooltip__title",children:t}),e.jsx("div",{className:"flower-tooltip__bar",children:e.jsx("div",{className:"flower-tooltip__bar-fill",style:{width:`${Math.min(100,Math.round(a/Math.max(1,d)*100))}%`}})}),e.jsx("div",{className:"flower-tooltip__value",children:a})]})})}),e.jsx("ellipse",{cx:0,cy:0,rx:j,ry:_,fill:m[r%m.length],opacity:.95,transform:`rotate(${l*180/Math.PI})`,style:{transition:`rx 400ms ease, ry 400ms ease, opacity 400ms ease, transform ${F(400)}`,filter:C?"drop-shadow(0 6px 12px rgba(250,180,80,0.4))":void 0,transformOrigin:"center"}}),e.jsx("text",{x:0,y:0,fontSize:8,textAnchor:"middle",dominantBaseline:"middle",fill:"#1F2937",children:t})]},t)}),e.jsx("circle",{r:o*.12,fill:"#111827",opacity:.95}),e.jsx("text",{x:0,y:2,fontSize:12,textAnchor:"middle",fill:"#fff",children:g})]})}),e.jsx("style",{children:`
        .flower-tooltip{ background: rgba(255,255,255,0.98); border-radius:8px; padding:8px; box-shadow: 0 6px 18px rgba(11,15,25,0.08); font-size:12px; color:#09121a }
        .flower-tooltip__bar{ background:#f1f5f9; width:120px; height:8px; border-radius:8px; overflow:hidden; margin-top:6px }
        .flower-tooltip__bar-fill{ background:linear-gradient(90deg,#f59e0b,#f97316); height:100%; }
        .flower-tooltip__title{ font-weight:600 }
        /* show the tooltip when the parent group is hovered or focused */
        svg g:hover .flower-tooltip, svg g:focus .flower-tooltip, svg g:active .flower-tooltip{ display:block; pointer-events:auto }
      `})]})};try{u.displayName="ConstellationFlower",u.__docgenInfo={description:"",displayName:"ConstellationFlower",props:{pillars:{defaultValue:{value:"{}"},description:"",name:"pillars",required:!1,type:{name:"Pillars"}},size:{defaultValue:{value:"120"},description:"",name:"size",required:!1,type:{name:"number"}},highlight:{defaultValue:{value:"[]"},description:"",name:"highlight",required:!1,type:{name:"(keyof Pillars)[]"}}}}}catch{}export{u as C};
